(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{271:function(t,e,a){t.exports=a.p+"assets/img/img.968a08df.png"},299:function(t,e,a){"use strict";a.r(e);var s=a(10),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"存储"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#存储"}},[t._v("#")]),t._v(" 存储")]),t._v(" "),e("h3",{attrs:{id:"_1-集中式存储"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-集中式存储"}},[t._v("#")]),t._v(" 1. 集中式存储")]),t._v(" "),e("ol",[e("li",[t._v("DAS")]),t._v(" "),e("li",[t._v("NAS")]),t._v(" "),e("li",[t._v("SAN:SCSI")])]),t._v(" "),e("h3",{attrs:{id:"_2-分布式存储"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-分布式存储"}},[t._v("#")]),t._v(" 2. 分布式存储")]),t._v(" "),e("ol",[e("li",[t._v("块存储  磁盘（未格式化）,性能要求高")]),t._v(" "),e("li",[t._v("文件系统存储  （NAS），文本编辑")]),t._v(" "),e("li",[t._v("对象存储  上传 下载 备份\n4.  2006 亚马逊 s3")])]),t._v(" "),e("h4",{attrs:{id:"_2-1-ceph"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ceph"}},[t._v("#")]),t._v(" 2.1 ceph")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("软件定义的开源文件解决方案，对象存储重点（s3,swift）\n")])])]),e("p",[t._v("版本：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#相关操作")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#部署")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1.ceph-deploy方式")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#主机名 不能更改")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#主机名解析")]),t._v("\n\n/etc/hosts\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#yum ceph安装")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ssh免密")]),t._v("\n\nceph-deploy new ceph1 ceph2 ceph3\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" ceph\nceph-deploy mon create-initial\nceph-deploy admin ceph1 ceph2 ceph3\nceph-deploy mgr create ceph1 ceph2 ceph3\n\nceph-deploy osd create "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--data")]),t._v(" /dev/sdb ceph1_osd\n\nlsblk\nblkid\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ceph 相关命令")]),t._v("\nceph "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("\nceph osd tree\nceph osd pool create mypool "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\nceph pg dump pgs_brief\nceph osd pool get mypool all\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#块存储")]),t._v("\nceph osd pool application "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" mypool rbd\nrbd create mypool/disk01 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--size")]),t._v(" 1G\nrbd map mypool/disk01\nll /dev/rbd0\nmkfs.ext4 /dev/rbd0\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2.cephadm")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3.手动")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#4.ceph-ansible")]),t._v("\n")])])]),e("p",[t._v("架构")]),t._v(" "),e("ol",[e("li",[t._v("服务\n"),e("ol",[e("li",[t._v("mon 集群所有信息,状态，入口")]),t._v(" "),e("li",[t._v("mgr 监控，收集所有信息,查询操作")]),t._v(" "),e("li",[t._v("mds 元数据")])])]),t._v(" "),e("li",[t._v("osd 磁盘")]),t._v(" "),e("li",[t._v("pool 存储池 逻辑概念 ，先创建\n"),e("ol",[e("li",[e("code",[t._v("ceph osd pool ls detail")])]),t._v(" "),e("li",[t._v("pg: 归置组，看不见，对象名hash计算后存到PG上（crush1），PG根据pool的类型和副本数放到对应的osd( crush2)")]),t._v(" "),e("li",[t._v("pgp:")])])]),t._v(" "),e("li",[t._v("rdb 块")]),t._v(" "),e("li",[t._v("iSCSI（Internet Small Computer System Interface）是一种在IP网络上运行的存储协议，它将SCSI协议封装在TCP/IP协议中，可以通过网络提供块级存储服务。iSCSI架构通常包括以下组件：\n"),e("ol",[e("li",[t._v("iSCSI initiator：发起iSCSI请求的主机或设备，它使用iSCSI协议访问iSCSI target上的存储资源。")]),t._v(" "),e("li",[t._v("iSCSI target：提供存储资源的设备或主机，它使用iSCSI协议响应iSCSI initiator的请求，并将存储资源映射到iSCSI LUN（Logical Unit Number）。")]),t._v(" "),e("li",[t._v("iSCSI LUN：iSCSI target上的逻辑单元号，它可以是一个物理磁盘、一个分区、一个文件或其他存储资源，由iSCSI target管理并映射给iSCSI initiator。")]),t._v(" "),e("li",[t._v("iSCSI SAN（Storage Area Network）：使用iSCSI协议连接的存储网络，它可以是一个局域网或广域网，连接多个iSCSI initiator和iSCSI target，并提供共享存储资源。")]),t._v(" "),e("li",[t._v("iSCSI HBA（Host Bus Adapter）：连接iSCSI initiator和iSCSI SAN的网络适配器或网卡，它可以是专用的iSCSI HBA或使用标准网卡实现。")]),t._v(" "),e("li",[t._v("iSCSI software initiator：在主机上安装的iSCSI initiator软件，它使用主机的网络适配器或网卡连接到iSCSI SAN，并将iSCSI请求转换为SCSI命令。")]),t._v(" "),e("li",[t._v("在iSCSI架构中，iSCSI initiator通过网络连接到iSCSI target，并访问iSCSI LUN上的存储资源，就像直接连接到本地存储设备一样。通过iSCSI技术，可以实现存储资源的共享、备份、迁移等功能，提高存储资源的利用率和可靠性。")])])])]),t._v(" "),e("p",[t._v("rados是对象数据的底层存储服务由多个主机组成的存储集群\nlibrados 是rados的api 可以使用java")]),t._v(" "),e("p",[t._v("ceph通过crush 计算后存储在对应的服务器上")]),t._v(" "),e("p",[t._v("访问方式 基于librados api提供接口")]),t._v(" "),e("ol",[e("li",[t._v("cephfs 挂载后访问")]),t._v(" "),e("li",[t._v("rbd 块，相当于提供的磁盘")]),t._v(" "),e("li",[t._v("RadosGW")])]),t._v(" "),e("p",[t._v("底层rados")]),t._v(" "),e("ol",[e("li",[t._v("FileStore BlueStore\nPOSIX")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(271),alt:"img.png"}})]),t._v(" "),e("p",[t._v("对象存储")]),t._v(" "),e("ol",[e("li",[t._v("副本，故障域（osd，host）")])])])}),[],!1,null,null,null);e.default=n.exports}}]);